<!doctype html>
<!--[if IE]><![endif]-->
<!--[if lt IE 7 ]> <html lang="es" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="es" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="es" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="es" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="es" class="no-js"> <!--<![endif]-->
<head>
        <script></script> <!-- Avoid script blocking -->
        <meta charset="utf-8">
        <title>Form</title>
        <link rel="stylesheet" href="../../../build/chico-min-0.5.5.css"> <!-- Chico-UI Core Style Sheet -->
		<link rel="stylesheet" href="../../docs.css">
        <link rel="stylesheet" href="../../../src/css/grid.css">
        <!--[if lt IE 7 ]>
            <script src="../../../libs/js/dd_belatedpng.js"></script>
            <script> DD_belatedPNG.fix('img, .ico'); //fix any <img> or .ico background-images </script>
        <![endif]-->
        <script src="../../../libs/js/jquery.js"></script>
		<script src="../../../build/chico-min-0.5.5.js"></script>
    </head>
<body>



<h1>Form</h1>

<div class="sourceTabs">
	<ul>
		<li><a href="#demo">Demo</a></li>
		<li><a href="#html">HTML</a></li>
		<li><a href="#js">JavaScript</a></li>
	</ul>
	<div>
		<div id="demo">
			<form action="ajax.html" id="demoform">
		    	<fieldset>
		    		<legend>Manejo de Forms</legend>
		    		<p class="required">* Datos obligatorios</p>
		    		<ol>
		    			<li class="fieldBox">
		    				<label class="required" for="val_email">
		    					<span>E-mail: <em>*</em></span>													
		    					<input type="email" id="val_email" required="required">
		    				</label>
		    				<p class="help">Escribe una descripción corta y clara.</p>
		    			</li>
		    		</ul>
		    	</fieldset>   
		    	<p class="actions">
		    		<input type="submit" value="Enviar" class="btn primary">
		    		<a href="#" class="resetForm">Cancelar</a>
		    	</p>
		    </form>
		</div>
		
		<div id="html">
			<code>
				<pre name="code" class="xml">
<form action="ajax.html" id="demoform">
	<fieldset>
		<legend>Manejo de Forms</legend>
		<p class="required">* Datos obligatorios</p>
		<ol>
			<li class="fieldBox">
				<label class="required" for="val_email">
					<span>E-mail: <em>*</em></span>													
					<input type="email" id="val_email" required="required" name="val_email">
				</label>
				<p class="help">Escribe una descripción corta y clara</p>
			</li>
		</ul>
	</fieldset>   
	<p class="actions">
		<input type="submit" value="Enviar" class="btn primary">
		<a href="#" class="resetForm">Cancelar</a>
	</p>
</form></pre>
			</code>
		</div>

		<div id="js">
			<code>
				<pre name="code" class="js">
var form = $('#demoform').form({
	messages:{
		general: "Formulario con errores."
	}
});</pre>
			</code>
		</div>
	</div>
</div>


<h2>Cómo se usa</h2>
<p>El componente Form es un controlador que maneja las instancias de las validaciones (<a href="watcher.html">Watchers</a>), limpia y resetea los campos, y además nos permite submitear el formulario ejecutando algunos callbacks. Este componente puede ser instanciado realizando una selección con jQuery, o bien, internamente por un <a href="watcher.html">Watcher</a>.</p>
<p>Realizando una selección con jQuery podemos iniciar el componente de la siguiente forma:</p>

<code>
	<pre name="code" class="js">$(".foo").form();</pre>
</code>

<h2>Configuración</h2>

<p>La mayoría de los componentes pueden recibir parámetros de configuración, que modifican el comportamiento por defecto.</p>

<p>Objeto de configuración:</p>

<code>
	<pre name="code" class="js">
{	
	messages: object, 					// Define validation messages
	beforeSubmit: function() {},          // Callback executed before submit
	onSubmit: function() {},			  // Callback executed on submit form to send via ajax
	afterSubmit: function() {},	   	// Callback executed after submit
	beforeValidate: function() {},		// Callback executed before validate
	onValidate: function() {},			// Callback executed on validate success
	onError: function() {},			   // Callback executed on validate error
	afterValidate: function() {},	     // Callback executed after validate
	onReset: function() {},    		   // Callback executed on reset form
	onClear: function() {}    		    // Callback executed on clear form (reset included)
}</pre>
</code>

<p>Ejemplo:</p>

<code>
	<pre name="code" class="js">
$(".foo").form({
	messages: {
		general: "Formulario con errores.",
	    required: "Mensaje por defecto requerido",
	    email: "Mensaje email por defecto",
	    maxLength: "Mensaje por defecto del max length",
	    minLength: "Mensaje por defecto del min length" 
	}
});</pre>
</code>

<h2>Objeto público</h2>
<p>Cada vez que se instancia un componente Form, retorna un objecto público de control que nos brinda información sobre la instancia.</p>

<code>
	<pre name="code" class="js">
var foo = $(".foo").form();

// It returns
foo = {
	uid: 121,                         // Global number instance
	element: HTMLElement,        	 // DOM Interface
	type: "form",                     // Component Type
	children: array,                  // Instances of components controlled by Form (watchers)
	messages: object,				 // Messages collections
	validate: function(),			 // Run watchers's validations
	submit: function(),			   // Submit the form
	checkStatus: function(),		  // Check status of forms validations
	getStatus: function(),			// Return the form validations status
	clear: function(),				// Clear watchers validations
	reset: function()				 // Reset form and clear validations
}</pre>
	</code>
</div>

<h2>Ejemplos</h2>
	
<div class="example">

	<h3>1. Enviar un formulario por ajax</h3>
	
	<div class="container">
		<form action="ajax.html" id="example1">
			<fieldset>
				<legend>Manejo de Forms</legend>
				<ol>
					<li class="fieldBox">
						<label for="example1_title">
							<span>Título: </span>													
							<input type="text" id="example1_title" name="example1_title">
						</label>
						<p class="help">Escribe una descripción corta y clara.</p>
					</li>
				</ul>
			</fieldset>   
			<p class="actions">
				<input type="submit" value="Enviar" class="btn primary" name="submit">
				<a href="#" class="resetForm">Cancelar</a>
			</p>
		</form>
	</div>
		
	<p>Si queremos enviar una formulario via ajax tenemos que hacer uso del callback onSubmit. Dicho callback, previene el envio del formulario para que podamos tener control del mismo. Por tal motivo, tenemos que obtener todos los valores del formulario con el método .serialize() de jQuery y luego enviarlos por ajax.</p>
	
	<code>
		<pre name="code" class="js">
$("#example1").form({
	onSubmit: function(){
		var data = $(this.element).serialize(); // this.element es el objecto DOM (form)
		// Send data via ajax here	
	}
});</pre>
	</code>

</div>


<div class="example">

	<h3>2. Mensajes por defecto</h3>
	
	<div class="container">
		<form action="ajax.html" id="example2">
			<fieldset>
				<legend>Manejo de Forms</legend>
				<ol>
					<li class="fieldBox">
						<label for="example2_title">
							<span>Título: </span>													
							<input type="text" id="example2_title" name="example2_title">
						</label>
						<p class="help">Escribe una descripción corta y clara.</p>
					</li>
					<li class="fieldBox">
						<label for="example2_email">
							<span>E-mail: </span>													
							<input type="text" id="example2_email" name="example2_email">
						</label>
					</li>
					<li class="fieldBox">
						<label for="example2_nick">
							<span>Apodo: </span>													
							<input type="text" id="example2_nick" name="example2_nick">
						</label>
					</li>
				</ul>
			</fieldset>   
			<p class="actions">
				<input type="submit" value="Enviar" class="btn primary" name="submit">
				<a href="#" class="resetForm">Cancelar</a>
			</p>
		</form>
	</div>
		
	<p>Para agregar mensajes por defecto a las validaciones de una formulario, debemos utilizar la propiedad "messages" al iniciarlo. Dicha propiedad es un objecto que contiene el tipo de la validacion (<a href="watcher.html">Watcher</a>) junto con un mensaje. Si queremos modificar el mensaje del error general, tenemos que indicarlo con el nombre "general".</p>
		
	<code>
		<pre name="code" class="js">
$("#example2").form({
	messages: {
		general: "Formulario con errores y mensajes por defecto.",
	    required: "Mensaje por defecto requerido",
	    email: "Mensaje por defecto del e-mail",
	    minLength: "Mensaje por defecto del min length"
	}
});</pre>
	</code>

</div>


<script>
	ui.codelighter();

    $(".sourceTabs").tabNavigator({
    	onSelect: function(){
    		if ( this.getSelected() != 0 ){
    			$(".ch-helper").hide();
    		} else {
    			$(".ch-helper").show();
    		};
    	}
    });

	var form = $('#demoform').form({
		messages:{
			general: "Formulario con errores."
		}
	});
	var email = $('#val_email').required().and().email();
	form.submit();

    // Examples
	$("#example1").form({
		onSubmit: function(){
			var data = $(this.element).serialize();
			alert("Send data via ajax here");	
		}
	});	
	$('#example1_title').required();
	
	var example2 = $("#example2").form({
		messages: {
			general: "Formulario con errores y mensajes por defecto.",
		    required: "Mensaje por defecto requerido",
		    email: "Mensaje por defecto del e-mail",
		    minLength: "Mensaje por defecto del min length"
		}
	});
	$('#example2_email').val("@.com");
	$('#example2_nick').val("chico");
	$('#example2_title').required();
	$('#example2_email').email();
	$('#example2_nick').minLength(6);
	
	example2.submit();

</script>



</body>
</html>
