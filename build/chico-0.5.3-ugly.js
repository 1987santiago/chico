(function(a){var b=(new Date).getTime(),c=window.ui={version:"0.5.3",components:"carousel,dropdown,layer,modal,tabNavigator,tooltip,string,number,custom,required,helper,forms,viewer,chat,expando,codelighter",internals:"positioner,object,floats,navs,controllers,watcher",instances:{},features:{},init:function(){a("html").removeClass("no-js"),c.features=c.support(),c.components=window.components?c.components+","+window.components:c.components,c.internals=window.internals?c.internals+","+window.internals:c.internals,a(c.components.split(",")).each(function(a,b){c.factory({component:b})})},utils:{body:a("body"),html:a("html"),window:a(window),document:a(document),zIndex:1e3,index:0},events:{CHANGE_LAYOUT:"changeLayout"}};c.preload=function(a){typeof a==="string"&&(a=a.indexOf(",")>0?a.split(","):[a]);for(var b=0;b<a.length;b++){var c=document.createElement("object");c.data=a[b];var d=document.getElementsByTagName("head")[0];d.appendChild(c),d.removeChild(c)}},c.factory=function(b){if(!b)alert('Factory fatal error: Need and object {component:""} to configure a component.');else{if(!b.component){alert("Factory fatal error: No component defined.");return}var d=b.component,e=function(d){a.fn[d]=function(b){var e=[],f=this,b=b||{},g=arguments;f.each(function(f,h){var i={};i.type=d,i.element=h,i.uid=c.utils.index+=1,typeof b==="number"&&(i.value=b),g[1]&&(i.msg=g[1]),typeof b==="string"&&(i.msg=b),typeof b==="function"&&(i.lambda=b),typeof b==="object"&&a.extend(i,b);var j=c[d](i);if(j.type){var k=j.type;c.instances[k]||(c.instances[k]=[]),c.instances[k].push(j)}j.exists&&(j=j.object),e.push(j)});return e.length>1?e:e[0]},b.callback&&b.callback()};c[b.component]?e(b.component):c.get({method:"component",component:b.component,script:b.script?b.script:"src/js/"+b.component+".js",styles:b.style?b.style:"src/css/"+d+".css",callback:e})}},c.get=function(b){switch(b.method){case"content":var d=b.conf;a.ajax({url:d.ajaxUrl,type:d.ajaxType||"GET",data:d.ajaxParams,cache:!0,async:!0,success:function(a,b,e){d.$htmlContent.html(a),d.onContentLoad&&d.onContentLoad(),d.position&&c.positioner(d.position)},error:function(a,b,e){data=d.onContentError?d.onContentError(a,b,e):"<p>Error on ajax call </p>",d.$htmlContent.html(data),d.position&&c.positioner(d.position)}});break;case"component":if(b.style){var e=document.createElement("link");e.href=b.style,e.rel="stylesheet",e.type="text/css"}if(b.script){var f=document.createElement("script");f.src=b.script}var g=document.getElementsByTagName("head")[0]||document.documentElement,h=!1;f.onload=f.onreadystatechange=function(){!h&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(h=!0,b.callback&&b.callback(b.component),f.onload=f.onreadystatechange=null,g&&f.parentNode&&g.removeChild(f))},b.script&&g.insertBefore(f,g.firstChild),b.style&&g.appendChild(e)}},c.support=function(){var a=function(){var a=document.body||document.documentElement,b=a.style;return b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.OTransition!==undefined||b.transition!==undefined}();return{transition:a}},c.cache={map:{},add:function(a,b){c.cache.map[a]=b},get:function(a){return c.cache.map[a]},rem:function(a){c.cache.map[a]=null,delete c.cache.map[a]},flush:function(){delete c.cache.map,c.cache.map={}}},a(function(){var a=(new Date).getTime();c.loadTime=a-b}),c.positioner=function(b){var d=a(b.element),e,f;b.points||(b.points="cm cm"),b.offset||(b.offset="0 0");var g={"lt lb":"down","lb lt":"top","rt rb":"down","rb rt":"top","lt rt":"right","cm cm":"center"},h=b.offset.split(" "),i=parseInt(h[0]),j=parseInt(h[1]),k=typeof window.innerWidth!="undefined"?function k(){var a,b,c,d,e,f,g;a=window,b=a.innerWidth,c=a.innerHeight,f=a.pageXOffset,g=a.pageYOffset,d=0+i+f,e=0+j+g,bottom=c+g,right=b+f;return{element:a,left:0+i+f,top:0+j+g,bottom:c+g,right:b+f,width:b,height:c}}:function k(){var a,b,c,d,e,f,g;a=document.documentElement,b=a.clientWidth,c=a.clientHeight,f=a.scrollLeft,g=a.scrollTop,d=0+i+f,e=0+j+g,bottom=c+g,right=b+f;return{element:a,left:0+i+f,top:0+j+g,bottom:c+g,right:b+f,width:b,height:c}},l=function(a){var b=e.left,c=e.top,f=e.width,g=e.height,h=d.outerWidth(),i=d.outerHeight(),j={ll:b,lr:b+f,rr:b+f-h,cc:b+f/2-h/2},k={tt:c,tb:c+g,bt:c-i,mm:c+g/2-i/2},l={left:j[a.my_x+a.at_x],top:k[a.my_y+a.at_y]};return l},m=function(a,c){var h=l(c);h.direction=g[a];if(b.hold)return h;a=="lt lb"&&h.top+d.outerHeight()>f.bottom&&(c.my_y="b",c.at_y="t",stylesDown=h,h=l(c),h.direction="top",h.top-=e.height,h.top<f.top&&(c.my_y="t",c.at_y="b",h=stylesDown,h.direction="down"));if(h.left+d.outerWidth()>f.right){c.my_x="r",c.at_x="r";var i=h.direction;h=l(c),h.direction=i+"-right",i=="top"&&(h.top-=e.height)}return h},n=function(){var a=b.points.split(" "),c={my_x:a[0].slice(0,1),my_y:a[0].slice(1,2),at_x:a[1].slice(0,1),at_y:a[1].slice(1,2)},e=m(b.points,c);d.css({left:e.left,top:e.top}).removeClass("ch-top ch-left ch-down ch-right ch-down-right ch-top-right").addClass("ch-"+e.direction)},o=b.context?function o(){var a=b.context.offset();e={element:b.context,top:a.top+j,left:a.left+i,width:b.context.outerWidth(),height:b.context.outerHeight()};return e}:function o(){return f},p=function(){f=k(),e=o(),n()};p();var q=!1;c.utils.window.bind("resize scroll",function(){q=!0}),setInterval(function(){!q||(q=!1,p())},250);return a(d)},c.object=function(){var b=this;return{prevent:function(a){a&&(a.preventDefault(),a.stopPropagation())},loadContent:function(b){if(b.ajax===!0){b.ajaxUrl=b.$trigger.attr("href")||b.$trigger.parents("form").attr("action"),b.ajaxParams="x=x";if(b.$trigger.attr("type")=="submit"){b.ajaxType=b.$trigger.parents("form").attr("method")||"GET";var d=b.$trigger.parents("form").serialize();b.ajaxParams=b.ajaxParams+(d!=""?"&"+d:"")}c.get({method:"content",conf:b});return'<div class="loading"></div>'}if(b.ajax||b.msg&&b.msg.match(/(?:(?:(https?|file):\/\/)([^\/]+)(\/(?:[^\s])+)?)|(\/(?:[^\s])+)/g)){b.ajaxUrl=b.ajax||b.msg,b.ajaxParams="x=x",c.get({method:"content",conf:b});return'<div class="loading"></div>'}var e=b.content||b.msg;return a(e).length>0?a(e).clone().show():e},callbacks:function(a,b){if(a[b])return a[b]()},publish:{}}},c.floats=function(b){var d=c.object(b),e=function(b){a('<p class="btn ch-close">x</p>').bind("click",function(a){d.hide(a,b)}).prependTo(b.$container)},f=function(b){a('<div class="ch-cone"></div>').prependTo(b.$container)},g=function(b){b.$container=a('<div class="ch-'+b.type+'"><div class="ch-'+b.type+'-content"></div></div>').appendTo("body").hide(),b.$htmlContent=b.$container.find(".ch-"+b.type+"-content"),b.position=b.position||{},b.position.element=b.$container,b.position.hold=b.hold||!1,b.cache=b.hasOwnProperty("cache")?b.cache:!0,b.closeButton&&e(b),b.cone&&f(b),b.classes&&b.$container.addClass(b.classes),b.hasOwnProperty("width")&&b.$container.css("width",b.width),b.hasOwnProperty("height")&&b.$container.css("height",b.height),b.$htmlContent.html(d.loadContent(b)),b.$container.css("z-index",c.utils.zIndex++).fadeIn("fast",function(){d.callbacks(b,"onShow")}),c.positioner(b.position),b.visible=!0};d.show=function(a,b){a&&d.prevent(a);if(!b.visible){if(b.$container){b.cache||b.$htmlContent.html(d.loadContent(b)),b.$container.appendTo("body").css("z-index",c.utils.zIndex++).fadeIn("fast",function(){b.visible=!0,d.callbacks(b,"onShow")}),c.positioner(b.position);return}g(b)}},d.hide=function(b,c){b&&d.prevent(b);!c.visible||c.$container.fadeOut("fast",function(b){a(this).detach(),c.visible=!1,d.callbacks(c,"onHide")})},d.position=function(a,b){switch(typeof a){case"object":b.position.context=a.context||b.position.context,b.position.points=a.points||b.position.points,b.position.offset=a.offset||b.position.offset,b.position.fixed=a.fixed||b.position.fixed,c.positioner(b.position);break;case"string":a!="refresh"&&alert('ChicoUI error: position() expected to find "refresh" parameter.'),c.positioner(b.position);break;case"undefined":return b.position}};return d},c.navs=function(){var a=c.object();a.status=!1,a.show=function(b,c){a.prevent(b),a.status=!0,c.$trigger.addClass("ch-"+c.type+"-on"),c.$htmlContent.show(),a.callbacks(c,"onShow")},a.hide=function(b,c){a.prevent(b),a.status=!1,c.$trigger.removeClass("ch-"+c.type+"-on"),c.$htmlContent.hide(),a.callbacks(c,"onHide")};return a},c.controllers=function(){var a=c.object();a.children=[];return a},c.watcher=function(b){b||alert("Watcher fatal error: Need a configuration object to create a validation.");var d=c.object(),e=function(b){var d=c.instances.watcher;if(d&&d.length>0)for(var e=0,g=d.length;e<g;e++)if(d[e].element===b.element){a.extend(d[e].validations,j(b)),a.extend(d[e].conditions,k(b)),a.extend(d[e].messages,b.messages),d[e].types=f(d[e].types);return{exists:!0,object:d[e]}}},f=function(c){if(!c||c=="")return b.types;var d=c.split(","),e=b.types.split(","),f=[],h=0;g=e.length;for(h;h<g;h++)c.indexOf(e[h])===-1&&f.push(e[h]);f.length>0&&a.merge(d,f);return d.join(",")},h=function(b){var c;if(a(b.element).hasClass("options"))if(a(b.element).find("h4").length>0){var d=a(b.element).find("h4");d.wrapInner("<span>"),c=d.children()}else a(b.element).prev().attr("tagName")=="LEGEND"&&(c=a(b.element).prev());else c=a(b.element);return c},i=function(b){if(c.instances.forms.length<=0){a(b.element).parents("form").forms();var f=c.instances.forms.length-1;return c.instances.forms[f]}var d=0,e=c.instances.forms.length;for(d;d<e;d++)if(c.instances.forms[d].element===a(b.element).parents("form")[0])return c.instances.forms[d]},j=function(a){var b={},c=a.types.split(",");for(var d=0,e=c.length;d<e;d++)for(var f in a)c[d]==f&&(b[f]=a[f]);return b},k=function(a){var b={},c=a.types.split(",");for(var d=0,e=c.length;d<e;d++)for(var f in a)c[d]==f&&(b[f]=a.conditions[f]);return b},l=function(a){var b={};for(var c in a.messages)b[c]=a.messages[c];return b},m=function(){d.validate(b),d.parent.checkStatus()};d.status=!0,d.enabled=!0,d.types=b.types,d.reference=b.reference=h(b),d.parent=b.parent=i(b),d.validations=j(b),d.conditions=k(b),d.messages=l(b),d.defaultMessages=b.defaultMessages,d.helper=c.helper(b),d.validate=function(b){if(!a(b.element).attr("disabled")){if(d.publish.types.indexOf("required")==-1&&d.isEmpty(b))return;if(d.enabled)for(var c in d.validations){var e=d.conditions[c],f=a(b.element).val(),g=!0;c=="required"&&(g=!d.isEmpty(b)),e.patt&&(g=e.patt.test(f)),e.expr&&(g=e.expr(c.indexOf("Length")>-1?f.length:f,d.validations[c])),e.func&&c!="required"&&(g=e.func.call(this,f));if(!g){a(b.element).addClass("error"),b.status||d.helper.hide(),d.helper.show(d.messages[c]?d.messages[c]:d.parent.messages[c]),d.publish.status=d.status=b.status=!1;var h=b.tag=="OPTIONS"||b.tag=="SELECT"?"change":"blur";a(b.element).one(h,m);return}}if(!d.status||!d.enabled)a(b.element).removeClass("error"),d.helper.hide(),d.publish.status=d.status=b.status=!0,a(b.element).unbind(b.tag=="OPTIONS"||b.tag=="SELECT"?"change":"blur");d.callbacks(b,"validate")}},d.reset=function(b){d.publish.status=d.status=b.status=!0,a(b.element).removeClass("error"),d.helper.hide(),a(b.element).unbind("blur"),d.callbacks(b,"reset")},d.isEmpty=function(b){b.tag=a(b.element).hasClass("options")?"OPTIONS":b.element.tagName;switch(b.tag){case"OPTIONS":return a(b.element).find("input:checked").length==0;case"SELECT":var c=a(b.element).val();return c==-1||c==null;case"INPUT":case"TEXTAREA":return a.trim(a(b.element).val()).length==0}},d.publish={uid:b.uid,element:b.element,type:"watcher",types:d.types,status:d.status,reference:d.reference,parent:d.parent,validations:d.validations,conditions:d.conditions,messages:d.messages,and:function(){return a(b.element)},reset:function(){d.reset(b);return d.publish},validate:function(){d.validate(b);return d.publish},refresh:function(){return d.helper.position("refresh")},enable:function(){d.enabled=!0;return d.publish},disable:function(){d.enabled=!1;return d.publish}};var n=e(b);if(n){var d={};d.publish=n}else d.parent.children.push(d.publish);return d},c.carousel=function(b){var d=c.object(),e=!1,f=1;b.$trigger=a(b.element).addClass("ch-carousel"),b.$htmlContent=a(b.element).find(".carousel").addClass("ch-carousel-content");var g=c.utils.html.hasClass("ie6")?21:20,h=c.utils.html.hasClass("ie6")?b.$htmlContent.children().outerWidth():0,i=b.$htmlContent.children().size()*(b.$htmlContent.children().outerWidth()+g)+h;b.$htmlContent.wrap(a("<div>").addClass("ch-mask")).css("width",i);var j=b.$trigger.find(".ch-mask"),k=~~((b.$trigger.width()-70)/(b.$htmlContent.children().outerWidth()+20));k=k==0?1:k;var l=Math.ceil(b.$htmlContent.children().size()/k),m=(b.$htmlContent.children().outerWidth()+20)*k,n=(j.width()-m)/2;j.width(m).height(b.$htmlContent.children().outerHeight()+2),a.browser.msie&&a.browser.version=="6.0"&&(i=i-b.$htmlContent.children().outerWidth()*2);var o={prev:{$element:a('<p class="ch-prev">Previous</p>').bind("click",function(){p("prev",1)}).css("top",(b.$trigger.outerHeight()-22)/2),on:function(){o.prev.$element.addClass("ch-prev-on")},off:function(){o.prev.$element.removeClass("ch-prev-on")}},next:{$element:a('<p class="ch-next">Next</p>').bind("click",function(){p("next",1)}).css("top",(b.$trigger.outerHeight()-22)/2),on:function(){o.next.$element.addClass("ch-next-on")},off:function(){o.next.$element.removeClass("ch-next-on")}}};b.$trigger.prepend(o.prev.$element).append(o.next.$element),i>j.width()&&o.next.on();var p=function(g,h){var i;switch(g){case"prev":if(e||f-h<=0)return;f-=h,i=b.$htmlContent.position().left+m*h,f==1&&o.prev.off(),o.next.on();break;case"next":if(e||f+h>l)return;f+=h,i=b.$htmlContent.position().left-m*h,f==l&&o.next.off(),o.prev.on()}e=!0;var j=function(){e=!1,b.pager&&(a(".ch-pager li").removeClass("ch-pager-on"),a(".ch-pager li:nth-child("+f+")").addClass("ch-pager-on")),d.callbacks(b,"onMove")};c.features.transition?(b.$htmlContent.css({left:i}),j()):b.$htmlContent.animate({left:i},j);return b.publish},q=function(c){c>f?p("next",c-f):c<f&&p("prev",f-c),b.pager&&(a(".ch-pager li").removeClass("ch-pager-on"),a(".ch-pager li:nth-child("+f+")").addClass("ch-pager-on"));return b.publish},r=function(){var c=a('<ul class="ch-pager">'),d=[];for(var e=1,f=l+1;e<f;e+=1)d.push("<li>"),d.push(e),d.push("</li>");c.append(d.join("")),b.$trigger.append(c);var g=a(".ch-pager"),h=g.parent().width(),i=g.outerWidth();g.css("left",(h-i)/2),g.children().each(function(b,c){a(c).bind("click",function(){q(b+1)})})};b.pager&&r(),b.publish=d.publish,b.publish.uid=b.uid,b.publish.element=b.element,b.publish.type=b.type,b.publish.getSteps=function(){return k},b.publish.getPage=function(){return f},b.publish.moveTo=function(a){return q(a)},b.publish.next=function(){return p("next",1)},b.publish.prev=function(){return p("prev",1)};return b.publish},c.dropdown=function(b){var d=a(b.element).addClass("ch-dropdown"),e=d.hasClass("ch-secondary")?"secondary":"primary",f=c.navs(),g=function(g){f.prevent(g);if(f.status)return h();a(c.instances.dropdown).each(function(a,b){b.hide()}),b.$htmlContent.css("z-index",c.utils.zIndex++),f.show(g,b),e=="secondary"&&(b.$trigger.css("z-index",c.utils.zIndex++),d.addClass("ch-dropdown-on")),c.utils.document.one("click",h);return f.publish},h=function(a){f.prevent(a),e=="secondary"&&d.removeClass("ch-dropdown-on"),f.hide(a,b);return f.publish};b.$trigger=d.children(":first").bind("click",g).addClass("ch-dropdown-trigger-"+e).append('<span class="ch-down"> &raquo;</span>'),b.$htmlContent=b.$trigger.next().bind("click",function(a){a.stopPropagation()}).addClass("ch-dropdown-content-"+e).detach(),b.$htmlContent.find("a").one("click",function(){h()}),c.positioner({context:b.$trigger,element:b.$htmlContent,points:"lt lb",offset:"0 -1"}),d.after(b.$htmlContent),f.publish={uid:b.uid,element:b.element,type:b.type,show:g,hide:h};return f.publish},c.layer=function(b){b.$trigger=a(b.element),b.cone=!0,b.classes="box",b.visible=!1,b.position={},b.position.context=b.$trigger,b.position.offset=b.offset||"0 10",b.position.points=b.points||"lt lb";var d=c.floats(b),e=b.showTime||300,f=b.hideTime||300,g,h,i=function(a){g=setTimeout(function(a){l()},e)},j=function(a){h=setTimeout(function(a){m()},f)},k=function(){clearTimeout(g),clearTimeout(h)},l=function(c){d.show(c,b),b.event==="click"&&(a(".ch-layer").bind("click",function(a){a.stopPropagation()}),a(document).one("click",function(a){d.hide(a,b)}))},m=function(a){d.hide(a,b)};b.event==="click"?(b.closeButton=!0,b.$trigger.css("cursor","pointer").bind("click",l)):b.$trigger.css("cursor","default").bind("mouseover",i).bind("mouseout",j),a("body").bind(c.events.CHANGE_LAYOUT,function(){d.position("refresh",b)}),d.publish={uid:b.uid,element:b.element,type:b.type,content:b.content?b.content:b.ajax,show:function(){i();return d.publish},hide:function(){j();return d.publish},position:function(a){return d.position(a,b)||d.publish}};return d.publish},c.modal=function(b){b.$trigger=a(b.element),b.closeButton=b.type=="modal"?!0:!1,b.classes="box",b.ajax=!b.hasOwnProperty("ajax")&&!b.hasOwnProperty("content")&&!b.hasOwnProperty("msg")?!0:b.ajax;var d=c.floats(b),e=a("<div>").addClass("ch-dimmer").css({height:a(window).height(),display:"block"}).hide(),f={on:function(){e.appendTo("body").css("z-index",c.utils.zIndex++).fadeIn(),b.type=="modal"&&e.one("click",h)},off:function(){e.fadeOut("normal",function(){e.detach()})}},g=function(e){f.on(),d.show(e,b),c.positioner(b.position),a(".ch-modal .btn.ch-close").one("click",h),b.$trigger.blur()},h=function(a){f.off(),d.hide(a,b)};b.$trigger.css("cursor","pointer").bind("click",g),d.publish={uid:b.uid,element:b.element,type:b.type,content:b.content?b.content:b.ajax===!0?b.$trigger.attr("href")||b.$trigger.parents("form").attr("action"):b.ajax,show:function(){g();return d.publish},hide:function(){h();return d.publish},position:function(a){return d.position(a,b)||d.publish}};return d.publish},c.transition=function(a){a=a||{},a.closeButton=!1,a.msg=a.msg||"Espere por favor...",a.content='<div class="loading"></div><p>'+a.msg+"</p>";return c.modal(a)},c.factory({component:"transition"}),c.tabNavigator=function(b){var d=c.controllers(),e=a(b.element).children(":first").find("a"),f=a(b.element).children(":first").next();a(b.element).addClass("ch-tabNavigator"),a(b.element).children(":first").addClass("ch-tabNavigator-triggers"),e.addClass("ch-tabNavigator-trigger"),f.addClass("ch-tabNavigator-content box"),a.each(e,function(a,e){d.children.push(c.tab(a,e,b))});var g=function(a,c){d.children[c].shoot(a);return b.publish};b.publish=d.publish,b.publish.uid=b.uid,b.publish.element=b.element,b.publish.type=b.type,b.publish.tabs=d.children,b.publish.select=function(b){return g(a.Event(),b)};var h=window.location.hash.replace("#!",""),i=!1;for(var j=d.children.length;j--;)if(d.children[j].conf.$htmlContent.attr("id")===h){g(a.Event(),j),i=!0;break}i||g(a.Event(),0);return b.publish},c.tab=function(b,d,e){var f=c.navs(),g=d.href.split("#"),h=a(d).parents(".ch-tabNavigator").find("#"+g[1]);f.conf={type:"tab",$trigger:a(d).addClass("ch-tabNavigator-trigger")};var i=function(){if(h.attr("id"))return h;f.conf.ajax=!0;var c=a("<div>").attr("id","ch-tab"+b);c.hide().appendTo(f.conf.$trigger.parents(".ch-tabNavigator").find(".ch-tabNavigator-content"));return c};f.conf.$htmlContent=i(),f.status||f.conf.$htmlContent.hide(),f.shoot=function(c){f.prevent(c);var d=e.publish.tabs;d[b].status||(a.each(d,function(a,b){b.status&&b.hide(c,b.conf)}),f.conf.$htmlContent.html()===""&&f.conf.$htmlContent.html(f.loadContent(f.conf)),f.show(c,f.conf),window.location.hash="#!"+f.conf.$htmlContent.attr("id"),f.callbacks(e,"onSelect"))},f.conf.$trigger.bind("click",function(a){f.shoot(a)});return f},c.tooltip=function(b){b.cone=!0,b.content=b.element.title,b.visible=!1,b.position={},b.position.context=a(b.element),b.position.offset=b.offset||"0 10",b.position.points=b.points||"lt lb";var d=c.floats(b),e=function(c){a(b.element).attr("title",""),d.show(c,b)},f=function(c){a(b.element).attr("title",b.content),d.hide(c,b)};b.$trigger=a(b.element).css("cursor","default").bind("mouseenter",e).bind("mouseleave",f),a("body").bind(c.events.CHANGE_LAYOUT,function(){d.position("refresh",b)}),d.publish={uid:b.uid,element:b.element,type:b.type,content:b.content,show:function(){e();return d.publish},hide:function(){f();return d.publish},position:function(a){return d.position(a,b)||d.publish}};return d.publish},c.string=function(b){b.types="text,email,url,minLength,maxLength",b.reference=a(b.element),b.conditions={text:{patt:/^([a-zA-Z\s]+)$/},email:{patt:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/},url:{patt:/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/},minLength:{expr:function(a,b){return a>=b}},maxLength:{expr:function(a,b){return a<=b}}},b.messages=b.messages||{},b.msg&&(b.messages.string=b.msg,b.msg=null),!b.text&&!b.email&&!b.url&&!b.maxLength&&!b.minLength&&(b.text=!0);var d=c.watcher(b);return d.publish},c.email=function(a){a=a||{},a.type="email",a.email=!0,a.messages=a.messages||{},a.msg&&(a.messages.email=a.msg,a.msg=null);return c.string(a)},c.factory({component:"email"}),c.url=function(a){a=a||{},a.type="url",a.url=!0,a.messages=a.messages||{},a.msg&&(a.messages.url=a.msg,a.msg=null);return c.string(a)},c.factory({component:"url"}),c.minLength=function(a){a=a||{},a.type="minLength",a.minLength=a.value,a.messages=a.messages||{},a.msg&&(a.messages.minLength=a.msg,a.msg=null);return c.string(a)},c.factory({component:"minLength"}),c.maxLength=function(a){a=a||{},a.type="maxLength",a.maxLength=a.value,a.messages=a.messages||{},a.msg&&(a.messages.maxLength=a.msg,a.msg=null);return c.string(a)},c.factory({component:"maxLength"}),c.number=function(b){b.types="number,min,max,price",b.reference=a(b.element),b.conditions={number:{patt:/^([0-9\s]+)$/},min:{expr:function(a,b){return a>=b}},max:{expr:function(a,b){return a<=b}},price:{patt:/^(\d+)[.,]?(\d?\d?)$/}},b.messages=b.messages||{},b.msg&&(b.messages.number=b.msg,b.msg=null),!b.number&&!b.min&&!b.max&&!b.price&&(b.number=!0);var d=c.watcher(b);return d.publish},c.min=function(a){a=a||{},a.min=a.value,a.messages=a.messages||{},a.msg&&(a.messages.min=a.msg,a.msg=null);return c.number(a)},c.factory({component:"min"}),c.max=function(a){a=a||{},a.max=a.value,a.messages=a.messages||{},a.msg&&(a.messages.max=a.msg,a.msg=null);return c.number(a)},c.factory({component:"max"}),c.price=function(a){a=a||{},a.price=!0,a.messages=a.messages||{},a.msg&&(a.messages.price=a.msg,a.msg=null);return c.number(a)},c.factory({component:"price"}),c.custom=function(a){a.lambda||alert('Custom Validation fatal error: Need a function to evaluate, try $().custom(function(){},"Message");'),a.custom=!0,a.types="custom",a.conditions={custom:{func:a.lambda}},a.messages=a.messages||{},a.msg&&(a.messages.custom=a.msg,a.msg=null);var b=c.watcher(a);return b.publish},c.required=function(a){a.required=!0,a.types="required",a.conditions={required:"that.isEmpty"},a.messages=a.messages||{},a.msg&&(a.messages.required=a.msg,a.msg=null);var b=c.watcher(a);return b.publish},c.helper=function(b){var d={};d.type="helper",d.$trigger=a(b.element),d.cone=!0,d.classes="helper"+b.uid,d.visible=!1,d.position={},d.position.context=b.reference,d.position.offset=d.offset||"15 0",d.position.points=d.points||"lt rt";var e=c.floats(d),f=function(){a(".helper"+b.uid).remove(),d.visible=!1,e.callbacks(d,"hide")},g=function(b){d.content='<p><span class="ico error">Error: </span>'+b+"</p>",e.show(a.Event(),d)};a("body").bind(c.events.CHANGE_LAYOUT,function(){e.position("refresh",d)}),e.publish={uid:d.uid,element:d.element,type:d.type,show:function(a){g(a)},hide:f,position:function(a){return e.position(a,d)||e.publish}};return e.publish},c.forms=function(b){if(a(b.element).find(":submit").length==0||a(b.element).attr("action")=="")alert("Forms fatal error: The <input type=submit> is missing, or need to define a action attribute on the form tag.");else{if(c.instances.forms&&c.instances.forms.length>0)for(var d=0,e=c.instances.forms.length;d<e;d++)if(c.instances.forms[d].element===b.element)return{exists:!0,object:c.instances.forms[d]};var f=c.controllers(),g=!1;a(b.element).bind("submit",function(a){f.prevent(a)}),a(b.element).find(":submit").unbind("click"),b.messages||(b.messages={}),b.messages.general=b.messages.general||"Check for errors.";var h=a('<p class="ch-validator"><span class="ico error">Error: </span>'+b.messages.general+"</p>"),i=function(){a(b.element).before(h),a("body").trigger(c.events.CHANGE_LAYOUT)},j=function(){h.detach(),a("body").trigger(c.events.CHANGE_LAYOUT)},k=function(){for(var a=0,b=f.children.length;a<b;a++)if(!f.children[a].status){g||j(),i(),g=!1;return}g||(j(),g=!0)},l=function(a){f.callbacks(b,"beforeValidate"),f.prevent(a);for(var c=0,d=f.children.length;c<d;c++)f.children[c].validate();k(),f.callbacks(b,"afterValidate");return b.publish},m=function(a){f.callbacks(b,"beforeSubmit"),f.prevent(a),l(a),g&&(b.hasOwnProperty("onSubmit")?f.callbacks(b,"onSubmit"):b.element.submit()),f.callbacks(b,"afterSubmit");return b.publish},n=function(a){f.prevent(a),b.element.reset(),j();for(var c=0,d=f.children.length;c<d;c++)f.children[c].reset();return b.publish};a(b.element).bind("submit",function(a){f.prevent(a),m(a)}),a(b.element).find(":reset, .resetForm").bind("click",n),b.publish=f.publish,b.publish.uid=b.uid,b.publish.element=b.element,b.publish.type=b.type,b.publish.status=g,b.publish.children=f.children,b.publish.messages=b.messages,b.publish.validate=l,b.publish.submit=m,b.publish.checkStatus=function(){k();return b.publish},b.publish.clear=n;return b.publish}},c.viewer=function(b){var d=c.controllers(),e=a(b.element);e.addClass("ch-viewer");var f={};f.carouselStruct=a(b.element).find("ul").clone().addClass("carousel"),f.carouselStruct.find("img").each(function(b,c){a(c).attr("src","").unwrap()}),f.showContent=function(){a(".ch-viewer-modal-content").parent().addClass("ch-viewer-modal"),a(".ch-viewer-modal-content").html(f.carouselStruct),a(".ch-viewer-modal-content img").each(function(b,c){a(c).attr("src",k[b])}),d.children[2]=f.carousel=a(".ch-viewer-modal-content").carousel({pager:!0}),a(".ch-viewer-modal-content .ch-carousel-content").css("left",0),f.carousel.moveTo(i.selected),f.modal.position()},f.hideContent=function(){a("ch-viewer-modal").remove(),f.carouselStruct.css("left","0");for(var b=0,d=c.instances.carousel.length;b<d;b+=1)if(c.instances.carousel[b].element===f.carousel.element){c.instances.carousel.splice(b,1);return}},d.children[1]=f.modal=a("<a>").modal({content:'<div class="ch-viewer-modal-content">',width:600,height:545,onShow:f.showContent,onHide:f.hideContent});var g={};g.wrapper=a("<div>").addClass("ch-viewer-display"),g.display=a(b.element).children(":first"),e.append(g.wrapper.append(g.display)),e.append('<div class="ch-lens">'),g.children=g.display.find("a"),g.itemWidth=a(g.children[0]).parent().outerWidth(),g.lens=e.find(".ch-lens"),c.positioner({element:g.lens,context:g.wrapper}),g.lens.bind("click",function(a){f.modal.show()}),g.wrapper.bind("mouseover",function(){g.lens.fadeIn(400)}),e.bind("mouseleave",function(){g.lens.fadeOut(400)});var h=c.utils.html.hasClass("ie6")?g.itemWidth:0;g.display.css("width",g.children.length*g.itemWidth+h).addClass("ch-viewer-content"),g.children.bind("click",function(a){d.prevent(a),f.modal.show()});var i={};i.selected=1,i.wrapper=a("<div>").addClass("ch-viewer-triggers"),e.append(i.wrapper.append(e.find("ul").clone().addClass("carousel"))),i.children=i.wrapper.find("img"),i.children.each(function(b,c){a(c).attr("src",a(c).attr("src").replace("v=V","v=M")).unwrap().bind("click",function(a){d.prevent(a),j(b+1)})}),d.children[0]=i.carousel=i.wrapper.carousel(),i.wrapper.bind("mouseenter",function(){g.lens.fadeOut(400)});var j=function(d){if(d>g.children.length||d<1||isNaN(d)){alert("Error: Expected to find a number between 1 and "+g.children.length+".");return b.publish}var e=i.carousel.getSteps(),f=i.carousel.getPage(),h=Math.ceil(d/e);a(i.children[i.selected-1]).removeClass("ch-thumbnail-on"),a(i.children[d-1]).addClass("ch-thumbnail-on");var j={left:(-d+1)*g.itemWidth};c.features.transition?g.display.css(j):g.display.animate(j),f!=h&&i.carousel.moveTo(h),i.selected=d;return b.publish};b.publish=d.publish,b.publish.uid=b.uid,b.publish.element=b.element,b.publish.type=b.type,b.publish.children=d.children,b.publish.moveTo=function(a){d.callbacks(b,"onMove");return j(a)},j(1);var k=[];c.utils.window.load(function(){setTimeout(function(){g.children.each(function(b,c){k.push(a(c).attr("href"))}),c.preload(k)},250)});return b.publish},c.chat=function(a){var b=c.object(),d=function(a){switch(a){case"1":return"mercadolidesa.com.ar";case"2":return"mercadolistage.com.ar";case"3":return"mercadolibre.com.ar"}};a.msg&&(a.ruleGroupName=a.msg),b.load=function(){loadChatGZ(a.ruleGroupName,a.element.id,a.style||"block",a.template||"1",a.environment||"3")},c.get({method:"component",name:"chat",script:"http://www."+d(a.environment)+"/org-img/jsapi/chat/chatRBIScript.js",callback:function(){b.load()}}),b.publish={uid:a.uid,element:a.element,type:a.type};return b.publish},c.expando=function(b){var d=c.navs();a(b.element).children(":first").wrapInner('<span class="ch-expando-trigger"></span>'),a(b.element).addClass("ch-expando"),b.$trigger=a(b.element).find(".ch-expando-trigger"),b.$htmlContent=b.$trigger.parent().next(),b.open=b.open||!1;var e=function(a){if(d.status)return f();d.show(a,b);return b.publish},f=function(a){d.hide(a,b);return b.publish};b.$trigger.bind("click",function(a){d.prevent(a),e()}).addClass("ch-expando-trigger"),b.$htmlContent.bind("click",function(a){a.stopPropagation()}).addClass("ch-expando-content"),b.open&&e(),b.publish=d.publish,b.publish.uid=b.uid,b.publish.element=b.element,b.publish.type=b.type,b.publish.open=b.open,b.publish.show=function(){return e()},b.publish.hide=function(){return f()};return b.publish},c.codelighter=function(){var b=this,d=c.controllers();a("pre[name=code]").each(function(a,b){var e={snippet:b.innerHTML,element:b,uid:c.utils.index+=1};d.children.push(c["code"+b.className.toUpperCase()](e))});return d.children},c.codesnippet=function(a){a.paintedSnippet=a.snippet;var b=this,d=c.object();a.element.innerHTML=function(){for(var b in a.brush)a.brush[b].test(a.paintedSnippet)&&(a.paintedSnippet=a.paintedSnippet.replace(a.brush[b],b));return a.paintedSnippet}(),d.publish={uid:a.uid,type:a.type,snippet:a.snippet,paintedSnippet:a.paintedSnippet};return d.publish},c.codeXML=function(a){a=a||{},a.type="codeXML",a.brush={"&lt;":/</g,"&gt;":/>/g,"<span class='ch-comment'>$&</span>":/(\&lt;|&lt;)!--\s*.*?\s*--(\&gt;|&gt;)/g,"<span class='ch-attrName'>$&</span>":/(id|name|class|title|alt|value|type|style|method|href|action|lang|dir|src|tabindex|usemap|data|rel|charset|encoding|size|selected|checked|placeholder|target|required|disabled|max|min|maxlength|accesskey)=".*"/g,"<span class='ch-attrValue'>$&</span>":/".+?"/g,"<span class='ch-tag'>$&</span>":/(&lt;([a-z]|\/).*?&gt;)/g,"    ":/\t/g},a.snippet=a.snippet||a.element.innerHTML;return c.codesnippet(a)},c.factory({component:"codeXML"}),c.codeJS=function(a){a=a||{},a.type="codeJS",a.brush={"$1 $2 $3":/(<)([a-z]|\/|.*?)(>)/g,"<span class='ch-operator'>$&</span>":/(\+|\-|=|\*|&|\||\%|\!|\?)/g,">":/>amp;/g,"<span class='ch-atom'>$&</span>":/(false|null|true|undefined)/g,"$1<span class='ch-keywords'>$2</span>$3":/(^|\s|\(|\{)(return|new|delete|throw|else|case|break|case|catch|const|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|switch|throw|try|typeof|var|void|while|with)(\s*)/g,"<span class='ch-attrValue'>$&</span>":/(".+?")|[0-9]/g,"    ":/\t/g,"<span class='ch-comment'>$&</span>":/(\/\*)\s*.*\s*(\*\/)/g,"<span class='ch-comment'>$&</span>":/(\/\/)\s*.*\s*\n*/g},a.snippet=a.snippet||a.element.innerHTML;return c.codesnippet(a)},c.factory({component:"codeJS"}),c.codeCSS=function(a){a=a||{},a.type="codeCSS",a.brush={"<span class='ch-comment'>$&</span>":/(\/\*)\s*.*\s*(\*\/)/g,"<span class='ch-attrName'>$&</span>":/(\w)\s*:".*"/g,"<span class='ch-selector'>$1$2</span>$3":/(#|\.)(\w+)({)/g,"$1<span class='ch-property'>$2</span>$3":/({|;|\s)(\w*-*\w*)(\s*:)/g,"$1<span class='ch-attrValue'>$2</span>$3":/(:)(.+?)(;)/g,"    ":/\t/g},a.snippet=a.snippet||a.element.innerHTML;return c.codesnippet(a)},c.factory({component:"codeCSS"}),c.init()})(jQuery)