<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta charset="utf-8">
	<title>Form - TestCases</title>
    <link rel="stylesheet" type="text/css" href="../php/packer.php?type=css">
    <link href="../libs/css/qunit.css" rel="stylesheet">
</head>
<body>

    <!-- #body -->
	<h1>Chico-UI: Form testcases</h1>
	<div class="box">
                      
            <form id="testForm" action="../test.html">
                <fieldset>
                    <legend>Casos de uso de Input</legend>
                    <p class="required">* Datos obligatorios</p>
                    <ol>
                        <li class="fieldBox">
                            <label class="required" for="val_custom">
                                <span>Custom field: <em>*</em></span>                                                 
                                <input type="email" id="val_custom" required="required">
                            </label>
                            <p class="help">Escribe una descripción corta y clara</p>
                        </li>
                        <li class="fieldBox">
                            <label class="required" for="val_title">
                                <span>Titulo: <em>*</em></span>                                                 
                                <input type="text" id="val_title" required="required">
                            </label>
                            <p class="help">Escribe una descripción corta y clara</p>
                        </li>
                        <li class="fieldBox">
                            <label class="required" for="val_email">
                                <span>E-mail: <em>*</em></span>                                                 
                                <input type="email" id="val_email" required="required">
                            </label>
                            <p class="help">Escribe una descripción corta y clara</p>
                        </li>
                        <li class="fieldBox">
                            <label for="val_url">
                                <span>URL:</span>
                                <input type="url" id="val_url">
                            </label>
                        </li>
                    </ol>
                </fieldset>

                <p class="actions">
                    <input type="submit" value="Enviar" class="btn primary">
                    <a href="#">Cancelar</a>
                </p>
            </form>
        </div>
        <!-- #body -->
	<hr>

	<h1 id="qunit-header">QUnit Test Suite</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup</div>

	<script src="../libs/js/jquery.js"></script>
    <script src="../libs/js/qunit.js"></script>
    <script src="../php/packer.php?debug=true"></script>
    <script src="functions.js"></script>

<!-- #script -->
	<script>
        
		$.fx.off = true;


		var testForm = $('#testForm').forms();  
		
   
        module("Forms basic instance object");
        
        test("Basics for testForm instance", function(){

            expect( 5 );

            ok( testForm.uid >= 0 , "Expected to find a defined content on the forms instance");
            
            ok( testForm.type == "forms" , "Expected to find \"forms\" as value of type attribute");
            
            ok( $.isArray(testForm.children) , "Expected to find a children array on the forms instance");
            
            ok( testForm.messages , "Expected to find a messages object on the forms instance");
            
            ok( testForm.messages.general , "Expected to find a general messages defined on the forms instance");

        });

        test("Forms chain methods", function(){

            var testFormOriginal = testForm;
            
            var chainCheckStatus = testForm.checkStatus();
            
            var chainClear = testForm.clear();

            var chainValidate = testForm.validate();
             
            ok ( chainCheckStatus === testFormOriginal, "Expected to return original instance object on show() method call");
            
            ok ( chainClear === testFormOriginal, "Expected to return original instance object on hide() method call");

            ok ( chainValidate === testFormOriginal, "Expected to return original instance object on .show().hide() methods chained call");

        });
        
        module("Form Interaction");
        
        test("Force error ;)",function(){
           
            var val_email = $("#val_email").email("Please write a valid email.");
            
            $("#val_email").val("force error ;)");
            
            testForm.validate();
           
            ok( $(".ch-validator")[0] , "Expected to find a general error message block");
            
            ok( $(".ch-validator").children("span.ico.error")[0] ,"Expected to find an icon on the message block");
            
            ok( $(".ch-validator").html().indexOf("Check for errors.")>=0 ,"Expected to have a explicit message: 'Check for errors.' ");
            
        });
        
        test("Force clear ;)", function(){
            
            testForm.clear();

            ok( !$(".ch-validator")[0] , "Expected NOT to find a general error message block");
                        
        })

	</script>

</body>
</html>
