<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Tab Navigator - TestCases</title>
	<link rel="stylesheet" type="text/css" href="../php/packer.php?type=css&get=tabNavigator">
	<link href="../libs/css/qunit.css" rel="stylesheet">
</head>
<body>

    <!-- #body -->
	<h1>Chico-UI: Tab Navigator testcases</h1>

	<div class="testTabs">
		<ul>
			<li><a href="#tab1">Tab 1</a></li>
			<li><a href="#tab2">Tab 2</a></li>
			<li><a href="#tab3">Tab 3</a></li>
			<li><a href="http://www.google.com.ar">Tab 4</a></li>
		</ul>
		<div>
			<div id="tab1">Tab 1</div>
			<div id="tab2">Tab 2</div>
			<div id="tab3">Tab 3</div>
		</div>
	</div>
<!-- #body -->
	<hr>

	<h1 id="qunit-header">QUnit Test Suite</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup</div>

	<script src="../libs/js/jquery.js"></script>
	<script src="../libs/js/qunit.js"></script>
	<script src="../php/packer.php?get=tabNavigator&debug=true"></script>
	<script src="functions.js"></script>

<!-- #script -->
	<script>
		var testTabs = $('.testTabs').tabNavigator();
		
		$.fx.off = true;

		/**
		 * 	Test Cases
		 */

       module("TabNavigator instance object");
		
        test("testTabs instance", function(){

            expect( 3 );

       		ok( testTabs.uid >= 0 , "Expected to find a \"uid\" attribute on the tabnavigator instance");
       		
    		ok( testTabs.type == "tabNavigator" , "Expected to find \"ui.tabNavigator\" as value of type attribute");
    		  		
    		ok( $.isArray(testTabs.tabs) && testTabs.tabs.length > 0 , "Expected to find an array of Tabs on the tabNavigator instance with more than 1 items on it");

        });
        
        test("TabNavigator chain methods", function(){
            
            expect ( 1 );
            
            var testTabsOriginal = testTabs;
            
            var chainSelect = testTabs.select(0);
             
            ok ( chainSelect === testTabsOriginal , "Expected to return original instance object on select() method call");
            
        });
        
        module('TabNavigator layout and interaction');
		
			var $ul = $('.testTabs').children(':first');
			var $triggers = $ul.find('a');
			var $contents = $ul.next();

		test('Check for right visual classes', function() {
			
			hasClass('.testTabs', 'ch-tabNavigator');
			hasClass($triggers, 'ch-tabNavigator-trigger');
			hasClass($contents, 'ch-tabNavigator-content');
			
		});

		test('State before click', function() {
			
			// Tabs state before click on any trigger
			hasClass($triggers.eq(0), 'on');
			hasNotClass($triggers.eq(1), 'on');
			hasNotClass($triggers.eq(2), 'on');

			// Contents state before click on any trigger
			equal( $contents.find( $triggers.eq(0).attr('href') ).css('display'), 'block', 'Expected " + selector + " to be visible' );
			equal( $contents.find( $triggers.eq(1).attr('href') ).css('display'), 'none', 'Content asociated to second tab shouldn\'t be activated' );
			equal( $contents.find( $triggers.eq(2).attr('href') ).css('display'), 'none', 'Content asociated to third tab shouldn\'t be activated' );
		
		});
		
		test('Click on second tab', function() {
			
			$triggers.eq(1).click();
			
			// First & third tab not activated
			hasNotClass($triggers.eq(0), 'on');
			hasClass($triggers.eq(1), 'on');
			hasNotClass($triggers.eq(2), 'on');

			// Contents
			equal( $contents.find( $triggers.eq(0).attr('href') ).css('display'), 'none', 'Content asociated to first tab shouldn\'t be activated after click on second tab' );
			equal( $contents.find( $triggers.eq(1).attr('href') ).css('display'), 'block', 'Content asociated to second tab sholud be activated after click on second tab' );
			equal( $contents.find( $triggers.eq(2).attr('href') ).css('display'), 'none', 'Content asociated to third tab shouldn\'t be activated after click on second tab' );
		
		});
		
		test('Click on third tab', function() {
		
			$triggers.eq(2).click();
			
			// First & second tab not activated
			hasNotClass($triggers.eq(0), 'on');
			hasNotClass($triggers.eq(1), 'on');
			hasClass($triggers.eq(2), 'on');

			// Contents
			equal( $contents.find( $triggers.eq(0).attr('href') ).css('display'), 'none', 'Content asociated to first tab shouldn\'t be activated after click on third tab' );
			equal( $contents.find( $triggers.eq(1).attr('href') ).css('display'), 'none', 'Content asociated to second tab shouldn\'t be activated after click on third tab' );
			equal( $contents.find( $triggers.eq(2).attr('href') ).css('display'), 'block', 'Content asociated to thind tab sholud be activated after click on third tab' );
		
		    testTabs.select(0);
		});
				
	</script>

</body>
</html>
