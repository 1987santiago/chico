<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Layer - TestCases</title>
	<link rel="stylesheet" type="text/css" href="../php/chico.php?css=true">
	<link href="../libs/css/qunit.css" rel="stylesheet">
</head>
<body>

<!-- #body -->
	<h1>Chico-UI: Layer testcases</h1>
    <hr />	
	<p class="box">
		<span class="testLayerClick">Layer ejecutado en el clic.</span>
	</p>

	<p class="box">
		<span class="testLayerHover">Layer ejecutado en el hover.</span>
	</p>

	<p class="box">
		<span class="testLayerAjax">Layer con contenido por Ajax.</span>
	</p>

	<p class="box">
		<span class="testLayerAjaxAbsolute">Layer con contenido por Ajax URL absoluta.</span>
	</p>

<!-- #body -->	
	<br>
	
	<hr>
	<h1 id="qunit-header">QUnit Test Suite</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup</div>

	<script src="../libs/js/jquery.js"></script>
	<script src="../libs/js/qunit.js"></script>
	<script src="../php/chico.php?get=layer&debug=true"></script>
	<script src="functions.js"></script>
	
<!-- #script -->
	<script>
		var testLayerClick = $('.testLayerClick').layer({
			event: 'click',
			content: '<h2>Layer ejecutado onMouseClick</h2><ul><li>Se cierra clickeando en el trigger, en el body y en el close</li></ul></p>'
		});
		
		var testLayerHover = $('.testLayerHover').layer({
			content: '<h2>Layer ejecutado onMouseOver</h2><ul><li>Se cierra onMouseOut</li></ul></p>'
		});

		var testLayerAjax = $(".testLayerAjax").layer({
			ajax: '../test.html'
		});
		
		$(".testLayerAjaxAbsolute").layer({
			ajax: "http://www.google.com"
		});
		
		$.fx.off = true;

		/**
		 * 	Test Cases
		 */
		 
        module("Layer instance object");
		
        test("testLayerClick instance", function(){

            expect( 3 );

       		ok( testLayerClick.uid >= 0 , "Expected to find a \"uid\" attribute on the layer instance");
       		
    		ok( testLayerClick.type == "ui.layer" , "Expected to find \"ui.layer\" as value of type attribute");
    		
    		ok( testLayerClick.content != undefined, "Expected to find a defined content on the layer instance");

        });

        test("testLayerHover instance", function(){

            expect( 3 );

       		ok( testLayerHover.uid >= 0 , "Expected to find a \"uid\" attribute on the layer instance");
       		
    		ok( testLayerHover.type == "ui.layer" , "Expected to find \"ui.layer\" as value of type attribute");
    		
    		ok( testLayerHover.content != undefined, "Expected to find a defined content on the layer instance");

        });

        test("testLayerAjax instance", function(){

            expect( 3 );

       		ok( testLayerAjax.uid >= 0 , "Expected to find a \"uid\" attribute on the layer instance");
       		
    		ok( testLayerAjax.type == "ui.layer" , "Expected to find \"ui.layer\" as value of type attribute");

    		ok( testLayerAjax.content != undefined , "Expected to find a defined content on the layer instance");

        });

        test("Layer chain methods", function(){
            
            expect ( 3 );
            
            var testLayerOriginal = testLayerHover;
            
            var chainShow = testLayerHover.show();
            
            var chainHide = testLayerHover.hide();

            var chained = testLayerHover.show().hide();
             
            ok ( chainShow === testLayerOriginal, "Expected to return original instance object on show() method call");
            
            ok ( chainHide === testLayerOriginal, "Expected to return original instance object on hide() method call");

            ok ( chained === testLayerOriginal, "Expected to return original instance object on .show().hide() methods chained call");
            
        });

        
		module('Layer layout and interaction');		
		
		test('Check for the right visual elements', function(){					
		  
            expect( 2 );
		  
			$('.testLayerClick').click();
			
			exists('.ui-layer .close');
			exists('.ui-layer .cone');
			
			$('body').click();
			
		});
		
		test('Show and hide functions', function(){

			notExists('.ui-layer');
			
			$('.testLayerClick').click();

			exists('.ui-layer');
				
			isVisible('.ui-layer');
			
			$('body').click();

			notExists('.ui-layer');
				
		});
		
		test('Close button interaction', function(){
		  
			$('.testLayerClick').click();
			
			exists('.ui-layer .close');				
		
			$('.ui-layer .close').click();
			
			notExists('.ui-layer');				
			
		});
		
		test('Check for click content interaction', function(){
		  
			$('.testLayerClick').click();
			
			$('.ui-layer').click();
			
			exists('.ui-layer');
			
			$('body').click();			

		});
		
		
		module('Layer execute on hover, Tests');
		
		test('Check for basic interaction', function(){
		  		
			notExists('.ui-layer');
			
			$('.testLayerHover').mouseover();
			exists('.ui-layer');
			
			isVisible('.ui-layer');

			$('.testLayerHover').mouseout();			
			notExists('.ui-layer');

		});
		
	</script>

</body>
</html>
