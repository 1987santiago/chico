<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Layer - TestCases</title>
	<link href="../src/css/base.css" rel="stylesheet">
	<link href="../src/css/qunit.css" rel="stylesheet">
</head>
<body>
	<h1>Chico-UI: Layer testcases</h1>
	
	<p class="box">
		<span class="testLayerClick">Layer ejecutado en el clic.</span>
	</p>

	<p class="box">
		<span class="testLayerHover">Layer ejecutado en el hover.</span>
	</p>
	
	<br>
	
	<hr>
	<h1 id="qunit-header">QUnit Test Suite</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup</div>

	<script src="../src/js/jquery.js"></script>
	<script src="../src/js/qunit.js"></script>
	<script src="../src/js/mlui.js"></script>
	<script>
		$('.testLayerClick').layer({
			event: 'click',
			content: {
				type:'param',
				data:'<h2>Layer ejecutado onMouseClick</h2><ul><li>Se cierra clickeando en el trigger, en el body y en el close</li></ul></p>'
			}
		});
		
		$('.testLayerHover').layer({
				content:{
					type:'param',
					data:'<h2>Layer ejecutado onMouseOver</h2><ul><li>Se cierra onMouseOut</li></ul></p>'
				}			
			});

		/**
		 * 	Test Cases
		 */
		

		module('Layer executed on click, Tests');		
		
		test('Check for basic interaction: show and hide component', function(){
						
			ok( !$('div').hasClass('uiLayer') , 'Layer shouldn\'t be create on DOM before click on trigger' );
		
			//show
			var $triggerClick = $('.testLayerClick');
				$triggerClick.trigger('click');				
			ok( $('div').hasClass('uiLayer') , 'Layer should be create on DOM' );
			equal( $('.uiLayer').css('display') , 'block' , 'Layer should show on the screen' );

			//close
			$('body').trigger('click');
			layerOpacity = $('.uiLayer').css("opacity");
			equal( layerOpacity, 0 , 'Layer shouldn\'t exists on DOM after click on body' );
						
		});
		
		test('Check for close button interaction', function(){
			//show
			var $triggerClick = $('.testLayerClick');
				$triggerClick.trigger('click');				
			ok( $('div').hasClass('uiLayer') , 'Layer should be create on DOM' );
			equal( $('.uiLayer').css('display') , 'block' , 'Layer should show on the screen' );
			
			//close btn
			$('.close').trigger('click');
			layerOpacity = $('.uiLayer').css("opacity");
			equal( layerOpacity, 0 , 'Layer shouldn\'t exists on DOM after click on body' );
		});
		
		test('Check for click content interaction', function(){
			//show
			var $triggerClick = $('.testLayerClick');
				$triggerClick.trigger('click');				
			$('.uiLayer').trigger('click');
			equal( $('.uiLayer').css('display') , 'block' , 'Layer should continue to show on the screen after click on the content' );
			
			//close
			$('body').trigger('click');
			equal( $('.uiLayer').css("opacity") , 0 , 'Layer shouldn\'t exists on DOM after click on body' );			
		});
		
		test('Check for the right visual elements', function(){					
			var $triggerClick = $('.testLayerClick');
				$triggerClick.trigger('click');
			ok( $('.uiLayer').find('p').hasClass('close') , 'Layer should have close button' );
			ok( $('.uiLayer').find('div').hasClass('cone') , 'Layer should have cone icon' );
			$('body').trigger('click');
		});
		
		
		module('Layer execute on hover, Tests');
		
		test('Check for basic interaction', function(){			
			//show
			var $triggerHover = $('.testLayerHover');
				$triggerHover.trigger('mouseover');				
			ok( $('div').hasClass('uiLayer') , 'Layer should be create on DOM' );
			equal( $('.uiLayer').css('display') , 'block' , 'Layer should show on the screen' );
			
			//close
			$triggerHover.trigger('mouseout');	
			equal( $('.uiLayer').css("opacity") , 0 , 'Layer shouldn\'t exists on DOM after click on body' );
			
		});
		
		test('Check for basic interaction: show and hide component', function(){					
			var $triggerHover = $('.testLayerHover');
				$triggerHover.trigger('mouseover');
			ok( !$('.uiLayer').find('p').hasClass('close') , 'Layer shouldn\'t have close button' );
			ok( $('.uiLayer').find('div').hasClass('cone') , 'Layer should have cone icon' );
			$triggerHover.trigger('mouseout');
		});
		
	</script>

</body>
</html>
