<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Carousel - TestCases</title>
	<link rel="stylesheet" type="text/css" href="../php/packer.php?type=css&get=carousel">
	<link href="../src/css/doc.css" rel="stylesheet">
	<link href="../libs/css/qunit.css" rel="stylesheet">
	
	<style>
		.testCarousel li{
			width:120px;
			height:120px;
		}
	</style>
</head>
<body>

    <!-- #body -->
	<h1>Chico-UI: Carousel testcases</h1>
	<div class="box">
		<h2>Elastic Carousel</h2>
		<div class="box testCarousel">
			<ul class="carousel">
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
			</ul>
		</div>
	</div>
	
	
	<div class="box">
		<h2>Carousel with width and height fixed</h2>
		<div class="box testCarouselFixed">
			<ul class="carousel">
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg">
					<p>Lorem ipsum...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg">
					<p>Lorem ipsum...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg">
					<p>Lorem ipsum...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg">
					<p>Lorem ipsum...</p>
				</li>
				
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg">
					<p>Lorem ipsum...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg">
					<p>Lorem ipsum...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg">
					<p>Lorem ipsum...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg">
					<p>Lorem ipsum...</p>
				</li>
			</ul>
		</div>
	</div>
	
	
	<div class="box">
		<h2>Carousel redraw behaivor</h2>
		<div class="box testCarouselRedraw">
			<ul class="carousel">
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg">
					<p>Lorem impusm...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg">
					<p>Lorem impusm...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg">
					<p>Lorem impusm...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg">
					<p>Lorem impusm...</p>
				</li>
				
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg">
					<p>Lorem impusm...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg">
					<p>Lorem impusm...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg">
					<p>Lorem impusm...</p>
				</li>
				<li>
					<img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg">
					<p>Lorem impusm...</p>
				</li>
			</ul>
		</div>
	</div>

<!-- #body -->
	<hr>

	<h1 id="qunit-header">QUnit Test Suite</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup</div>

	<script src="../libs/js/jquery.js"></script>
	<script src="../libs/js/qunit.js"></script>
	<script src="../php/packer.php?get=carousel&debug=true"></script>
	<script src="functions.js"></script>

<!-- #script -->
	<script>
		var carousel = $('.testCarousel').carousel({
			onMove: function(){
				$("body").addClass("onMove");
			}
		});
		
		var carousel2 = $(".testCarouselFixed").carousel({
			width:500,
			height:150
		});
		
		var carousel3 = $(".testCarouselRedraw").carousel();
		
		ch.features.transition = false;
		$.fx.off = true;

		/**
		 * 	Test Cases
		 */

		module("Carousel instance object");
       
		test("Carousel public properties", function(){

			expect( 3 );

			ok( carousel.uid >= 0 , "Expected to find a \"uid\" attribute on the carousel instance");
	
			ok( carousel.type == "carousel" , "Expected to find \"carousel\" as value of type attribute");
	
			ok( carousel.hasOwnProperty("element"), "Expected to find an \"element\" property" );

		});

		test("Carousel public methods", function(){

			expect( 6 );
	
			ok( carousel.hasOwnProperty("getPage"), "Expected to find a \"getPage\" method" );
	
			ok( carousel.hasOwnProperty("getSteps"), "Expected to find a \"getSteps\" method" );
	
			ok( carousel.hasOwnProperty("moveTo"), "Expected to find a \"moveTo\" method" );
			
			ok( carousel.hasOwnProperty("next"), "Expected to find a \"next\" method" );
			
			ok( carousel.hasOwnProperty("prev"), "Expected to find a \"prev\" method" );
			
			ok( carousel.hasOwnProperty("redraw"), "Expected to find a \"redraw\" method" );

		});
        
        test("Carousel chain methods", function(){
            
            expect ( 3 );
            
            var carouselOriginal = carousel;
            
            var chainNext = carousel.next();
            
            var chainPrev = carousel.prev();

            var chained = carousel.next().prev();
             
            ok ( chainNext === carouselOriginal, "Expected to return original instance object on next() method call");
            
            ok ( chainPrev === carouselOriginal, "Expected to return original instance object on prev() method call");

            ok ( chained === carouselOriginal, "Expected to return original instance object on .next().prev() methods chained call");
            
        });
        
        
        
        module("Carousel movement interaction");
       
		test("Next page with next() method", function(){
			
			expect ( 2 );
			
			equal( carousel.getPage(), 1, "Expected to return first page.");
			
			carousel.next();
			
			equal( carousel.getPage(), 2, "Expected to return second page.");
			
		});
		
		test("Previous page width prev() method", function(){
			
			expect ( 1 );
			
			carousel.prev();
			
			equal( carousel.getPage(), 1, "Expected to return first page.");
			
		});
		
		test("Next page with next button", function(){
			
			expect ( 2 );
			
			equal( carousel.getPage(), 1, "Expected to return first page.");
						
			$(".testCarousel.ch-carousel .ch-next").click();
			
			equal( carousel.getPage(), 2, "Expected to return second page.");
						
		});
		
		test("Previous page width prev button", function(){
			
			expect ( 1 );
			
			$(".testCarousel.ch-carousel .ch-prev").click();
			
			equal( carousel.getPage(), 1, "Expected to return first page.");
			
		});
		
		test("Go to a specific page with moveTo() method", function(){
			
			expect ( 1 );
			
			var pageToGo = 2;
			
			carousel.moveTo(pageToGo);
			
			equal( carousel.getPage(), pageToGo, "Expected to return correct page when it was moved.");
						
		});
		
		
		
		module("Carousel visual interaction");
		
		test("Arrows behavior on Next (on first page)", function(){
			
			expect ( 4 );
			
			carousel.moveTo(1);
			
			hasNotClass( ".testCarousel.ch-carousel .ch-prev", "ch-prev-on" );
			
			hasClass( ".testCarousel.ch-carousel .ch-next", "ch-next-on" );
			
			carousel.next();
			
			hasClass( ".testCarousel.ch-carousel .ch-prev", "ch-prev-on" );
			
			hasClass( ".testCarousel.ch-carousel .ch-next", "ch-next-on" );
		
		});
		
		test("Arrows behavior on Prev (on last page)", function(){
			
			expect ( 4 );
			
			var page;
			
			// Go to last page
			do {
				
				page = carousel.getPage();
				
				carousel.next();
				
			} while ( carousel.getPage() != page );
			
			
			hasClass( ".testCarousel.ch-carousel .ch-prev", "ch-prev-on" );
			
			hasNotClass( ".testCarousel.ch-carousel .ch-next", "ch-next-on" );
			
			carousel.prev();
			
			hasClass( ".testCarousel.ch-carousel .ch-prev", "ch-prev-on" );
			
			hasClass( ".testCarousel.ch-carousel .ch-next", "ch-next-on" );
			
			// Reset Carousel for next tests (Go to first page)
			carousel.moveTo(1);
			
		});
		
		
		
		module('Carousel callbacks');       	
		
		test('Carousel callback on next', function() {
			
			expect ( 1 );
			
			carousel.next();
			
			hasClass("body", "onMove");
			
			$("body").removeClass("onMove");

       	});
       	
       	test('Carousel callback on prev', function() {
			
			expect ( 1 );
			
			carousel.prev();
			
			hasClass("body", "onMove");
			
			$("body").removeClass("onMove");

       	});
       	
       	test('Carousel callback on move', function() {
			
			expect ( 1 );
			
			carousel.moveTo(2);
			
			hasClass("body", "onMove");
			
			$("body").removeClass("onMove");
			
			// Reset Carousel for next tests (Go to first page)
			carousel.moveTo(1);

       	});
       	
       	module("Carousel fixed measures");
		test("Width fixed", function(){
			
			expect ( 1 );
			
			equal( $(".testCarouselFixed.ch-carousel").width(), 500, "Expected to find a defined width on the carousel instance");
			
		});
		test("Height fixed", function(){
			
			expect ( 1 );
			
			equal( $(".testCarouselFixed.ch-carousel").height(), 150, "Expected to find a defined height on the carousel instance");
			
		});
		
		
		module("Carousel redraw behaivor");
		test("Redraw behaivor", function(){

			expect ( 1 );

			var oldSteps = carousel3.getSteps();

			$(".testCarouselRedraw").width("180");
			carousel3.redraw();
			
			var currentSteps = carousel3.getSteps();
			
			ok( (oldSteps > currentSteps && currentSteps > 0), "Expected to find less items after redraw");

		});
 
	</script>

</body>
</html>
