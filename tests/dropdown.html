<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Dropdown - TestCases</title>
	<link rel="stylesheet" type="text/css" href="../php/packer.php?css=true&get=dropdown">
	<link href="../libs/css/qunit.css" rel="stylesheet">
</head>
<body>

<!-- #body -->
	<h1>Chico-UI: Dropdown testcases</h1>
    <hr />
	<div class="testDropdown">
		<span>Buscadores</span>
		<ul>
			<li><a href="http://www.google.com.ar">Google</a></li>
			<li><a href="http://www.yahoo.com.ar">Yahoo</a></li>
			<li><a href="http://www.bing.com">Bing</a></li>	
		</ul>
	</div>
<!-- #body -->
	<hr>

	<h1 id="qunit-header">QUnit Test Suite</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup</div>

	<script src="../libs/js/jquery.js"></script>
	<script src="../libs/js/qunit.js"></script>
	<script src="../php/chico.php?get=dropdown&debug=true"></script>
	<script src="functions.js"></script>
	
<!-- #script -->
	<script>

		var testDropdown = $('.testDropdown').dropdown();
		
		$.fx.off = true;

		/**
		 * 	Test Cases
		 */

       module("Dropdown instance object");
		
        test("testDropdown instance", function() {

            expect( 2 );

       		ok( testDropdown.uid >= 0 , "Expected to find a \"uid\" attribute on the layer instance");
       		
    		ok( testDropdown.type == "ui.dropdown" , "Expected to find \"ui.layer\" as value of type attribute");

        });

        test("Dropdown chain methods", function(){
            
            expect ( 3 );
            
            var testDropdownOriginal = testDropdown;
            
            var chainShow = testDropdown.show();
            
            var chainHide = testDropdown.hide();

            var chained = testDropdown.show().hide();
             
            ok ( chainShow === testDropdownOriginal, "Expected to return original instance object on show() method call");
            
            ok ( chainHide === testDropdownOriginal, "Expected to return original instance object on hide() method call");

            ok ( chained === testDropdownOriginal, "Expected to return original instance object on .show().hide() methods chained call");
            
        });

		module('Dropdown layout and interaction');

		var $trigger = $('.testDropdown').children(':first');
		var $content = $trigger.next();

		test('Check for the right visual classes', function() {
			
			hasClass('.testDropdown', 'ch-dropdown');
			hasClass($trigger, 'ch-dropdown-trigger');
			hasClass($content, 'ch-dropdown-content');
			hasClass($trigger.find('span'), 'down');
			
		});

		test('Opens dropdown menu', function() {
			
			isNotVisible($content);
			
			$trigger.click();
			
			isVisible($content);
			hasClass($trigger, 'on');
			
		});
		
		test('Closes dropdown menu, clicking on body', function() {
			
			$trigger.click();
			$('body').click();
			
			isNotVisible($content);
			hasNotClass($trigger, 'on');
			
		});
		
		test('Closes dropdown menu, clicking on component trigger', function() {
			
			$trigger.click();
			$trigger.click();
			
			isNotVisible($content);
			hasNotClass($trigger, 'on');
			
		});
		
		test('Click inside content', function() {
			
			$trigger.click();
			$content.click();
			
			isVisible($content);
			hasClass($trigger, 'on');
			
			$trigger.click();
			
		});
		
		test('Click on content link', function() {
			
			$trigger.click();
			$content.find('a').click();
			
			isNotVisible($content);
			hasNotClass($trigger, 'on');
			
			$trigger.click();
			$('body').click();
			
		});
	</script>

</body>
</html>
