<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Dropdown - TestCases</title>
	<link href="../src/css/base.css" rel="stylesheet">
	<link href="../src/css/qunit.css" rel="stylesheet">
</head>
<body>
	<h1>Chico-UI: Dropdown testcases</h1>

	<div class="testDropdown">
		<span>Buscadores</span>
		<ul>
			<li><a href="http://www.google.com.ar">Google</a></li>
			<li><a href="http://www.yahoo.com.ar">Yahoo</a></li>
			<li><a href="http://www.bing.com">Bing</a></li>	
		</ul>
	</div>

	<hr>

	<h1 id="qunit-header">QUnit Test Suite</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup</div>

	<script src="../src/js/jquery.js"></script>
	<script src="../src/js/qunit.js"></script>
	<script src="../src/js/mlui.js"></script>
	<script>
		$('.testDropdown').dropdown();

		/**
		 * 	Test Cases
		 */

		module('Dropdown Tests');

		var $trigger = $('.testDropdown').children(':first');
		var $content = $trigger.next();

		test('Check for the right visual classes', function(){
			ok( $('.testDropdown').hasClass('uiDropdown'), 'Wrapper should has class uiDropdown' );
			ok( $trigger.hasClass('uiTrigger'), 'Trigger should has class uiTrigger' );
			ok( $content.hasClass('uiContent'), 'Content should has class uiContent' );
			ok( $trigger.find('span').hasClass('ico down'), 'Content should has an arrow icon' );
		});

		test('Check for basic interaction, clicking on the component and body', function(){ // Check the display property of content
			// State before click on trigger
			equal( $content.css('display'), 'none', 'Content should be hide before click on trigger' );

			// State after click on trigger
			$trigger.trigger('click');
			ok( $trigger.hasClass('on'), 'Trigger should be turned on after click it' );
			equal( $content.css('display'), 'block', 'Content should be show after click on trigger' );
			
			// State after click on body
			$('body').trigger('click');
			ok( !$trigger.hasClass('on'), 'Trigger should be turned off after click it' );
			equal( $content.css('display'), 'none', 'Content should be hide after click on body');	
		});
		
		test('Check for basic interaction, clicking on the component and component again', function(){ // Check the display property of content
			// State before click on trigger
			equal( $content.css('display'), 'none', 'Content should be hide before click on trigger' );

			// State after click on trigger
			$trigger.trigger('click');
			ok( $trigger.hasClass('on'), 'Trigger should be turned on after click it' );
			equal( $content.css('display'), 'block', 'Content should be show after click on trigger' );
			
			// State after click on trigger
			$trigger.trigger('click');
			ok( !$trigger.hasClass('on'), 'Trigger should be turned off after click it' );
			equal( $content.css('display'), 'none', 'Content should be hide after click on trigger');
		});
		
		test('Check for advanced interaction, clicking on the component and link inside content', function(){ // Check the display property of content
			// State before click on trigger
			equal( $content.css('display'), 'none', 'Content should be hide before click on trigger' );

			// State after click on trigger
			$trigger.trigger('click');
			ok( $trigger.hasClass('on'), 'Trigger should be turned on after click it' );
			equal( $content.css('display'), 'block', 'Content should be show after click on trigger' );
			
			// State after click on link inside content
			$content.find('a').trigger('click');
			ok( !$trigger.hasClass('on'), 'Trigger should be turned off after click it' );
			equal( $content.css('display'), 'none', 'Content should be hide after click on link inside content');
		});
		
		test('Check for advanced interaction, clicking on the component and content (and click on body)', function(){ // Check the display property of content
			// State before click on trigger
			equal( $content.css('display'), 'none', 'Content should be hide before click on trigger' );

			// State after click on trigger
			$trigger.trigger('click');
			ok( $trigger.hasClass('on'), 'Trigger should be turned on after click it' );
			equal( $content.css('display'), 'block', 'Content should be show after click on trigger' );
			
			// State after click on link inside content
			$content.trigger('click');
			equal( $content.css('display'), 'block', 'Content shouldn\'t be hide after click on content' );
			
			// State after click on trigger
			$('body').trigger('click');
			ok( !$trigger.hasClass('on'), 'Trigger should be turned off after click it' );
			equal( $content.css('display'), 'none', 'Content should be hide after click on body');	
		});

	</script>

</body>
</html>
