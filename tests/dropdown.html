<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Dropdown - TestCases</title>
	<link href="../src/css/chico.css" rel="stylesheet">
	<link href="../src/css/qunit.css" rel="stylesheet">
</head>
<body>
	<h1>Chico-UI: Dropdown testcases</h1>

	<div class="testDropdown">
		<span>Buscadores</span>
		<ul>
			<li><a href="http://www.google.com.ar">Google</a></li>
			<li><a href="http://www.yahoo.com.ar">Yahoo</a></li>
			<li><a href="http://www.bing.com">Bing</a></li>	
		</ul>
	</div>

	<hr>

	<h1 id="qunit-header">QUnit Test Suite</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup</div>

	<script src="../src/js/jquery.js"></script>
	<script src="../src/js/qunit.js"></script>
	<script src="../src/js/chico.js"></script>
	<script src="functions.js"></script>
	<script>

		$('.testDropdown').dropdown();
		
		$.fx.off = true;

		/**
		 * 	Test Cases
		 */

		module('Dropdown Tests');

		var $trigger = $('.testDropdown').children(':first');
		var $content = $trigger.next();

		test('Check for the right visual classes', function(){
			hasClass('.testDropdown', 'uiDropdown');
			hasClass($trigger, 'uiTrigger');
			hasClass($content, 'uiContent');
			hasClass($trigger.find('span'), 'ico down');
		});

		test('Opens dropdown menu', function(){
			isNotVisible($content);
			
			$trigger.click();
			
			isVisible($content);
			hasClass($trigger, 'on');
		});
		
		test('Closes dropdown menu, clicking on body', function(){
			$trigger.click();
			$('body').click();
			
			isNotVisible($content);
			hasNotClass($trigger, 'on');
		});
		
		test('Closes dropdown menu, clicking on component trigger', function(){
			$trigger.click();
			$trigger.click();
			
			isNotVisible($content);
			hasNotClass($trigger, 'on');
		});
		
		test('Click inside content', function(){
			$trigger.click();
			$content.click();
			
			isVisible($content);
			hasClass($trigger, 'on');
			
			$trigger.click();
		});
		
		test('Click on content link', function(){
			$trigger.click();
			$content.find('a').click();
			
			isNotVisible($content);
			hasNotClass($trigger, 'on');
			
			$trigger.click();
		});
	</script>

</body>
</html>
